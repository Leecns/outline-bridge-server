# Outline Bridge Server

This repository contains sample Docker Compose files to run an Outline bridge server.

## Documentation

### What is Outline?

[Outline](https://getoutline.org) is a Shadowsocks-based proxy by Google.
It lets you create Shadowsocks servers, set up clients, and manage users easily.

### How does it work?

It is the Outline normal flow:

```
(Outline client) <-> [Outline Upstream Server] <-> (Internet)
```

### What does bridge server do?

The bridge server prevents the direct connection between the client and the upstream server.

The bridge server changes the flow as below.

```
(Outline client) <-> [Outline Bridge Server] <-> [Outline Upstream Server] <-> (Internet)
```

### Setup the bridge server

First install the Outline server, client, and Manager based on the [official documentation](https://getoutline.org).
Then follow these steps to run the Outline bridge server.

1. Install Docker and Docker-compose.
1. Clone this repository into the bridge server.
1. Run `./setup.py` script. It gets the following inputs:
    1. `Server IP/Hostname`: The upstream IP or hostname (Outline Manager > Settings > Hostname)
    1. `Server Port`: The upstream Outline port (Outline Manager > Settings > Port)
    1. `Bridge Port`: Determine a free port for bridge server.
1. Run `docker-compose up -d`.
1. Run `./convert.py` to convert original (upstream) links to bridge links.
    * It gets the following inputs:
        1. `Bridge IP`: Enter the bridge server IP address or domain.
        1. `Original ss:// link`: Enter the original link generated by Outline Manager.
    * It prints the following outputs:
        1. `New outline link`: The new link with bridge IP/Domain and port.
        1. `New invitation link`: The new invitation link to share with your users.

### Docker images

* GitHub:
    * Image: ```ghcr.io/getimages/v2fly-core:v4.45.2```
    * URL: https://github.com/orgs/getimages/packages/container/package/v2fly-core
    * Digest: `sha256:289fc9451f21a265f95615e29f05ea23bc32026db152863eee317738813521d7`
* Docker Hub:
    * Image: ```v2fly/v2fly-core:v4.45.2```
    * URL: https://hub.docker.com/r/v2fly/v2fly-core/tags
    * Digest: `sha256:289fc9451f21a265f95615e29f05ea23bc32026db152863eee317738813521d7`

## More

* [V2Ray Docker Compose (Bridge and Upstream Servers)](https://github.com/miladrahimi/v2ray-docker-compose)
